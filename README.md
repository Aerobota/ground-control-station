## Poker Flat Ground Control Station

UAV ground station software emphasizing data collection and mission operations.

### Running the project

```
nodemon server.js
```

### Project structure

```
├── app <<< We write the code. Shared code (mainly/exclusively Backbone + RequireJS) between server/client
│   ├── Templates
│   │   └── try.jade
│   ├── Templates.js <<< Auto-generated upon build so we can Require the templates.
│   ├── Models
│   ├── Collections
│   ├── Views
│   │   └── Try.js
│   ├── app.js <<< "Top level application namespace", so to speak (rename gcs?)
│   ├── config.js <<< Config point for require.js
│   ├── main.js <<< Like main() in C, this is the code entry execution point for the client GUI
│   └── router.js <<< Standard Backbone router, if we need multiple they should go in a Routers/ dir
├── app.js <<< Node.js server (rename gcs-server?)
├── assets <<< We may write the code.  Static/external/other code used in the build process.
│   ├── js
│   │   ├── libs <<< Code we maintain, non-Backbone or otherwise odd; we may need to wrap for AMD, etc.
│   │   └── vendor <<< Code we don't maintain at all
│   │       ├── backbone.js
│   │       ├── jade.js
│   │       ├── jquery.js
│   │       ├── jshint.js
│   │       ├── require.js
│   │       └── underscore.js
│   └── less <<< Stylesheets for our Backbone Views, all get compiled during build process into /public/stylesheets/
│       └── assets.less
├── build <<< Interim files created during build / continuous-integration processes
├── grunt.js <<< Build configuration script
├── package.json <<< Node dependencies
├── public <<< We don't write the code!  It's autogenerated.  Express web root.
│   ├── images
│   ├── javascripts
│   │   ├── require.js <<< Necessary to bootstrap the client.
│   │   └── required.js <<< Auto-generated during build process, contains ALL client app code
│   └── stylesheets
│       ├── assets.css <<< This file is autogenerated during build process (from assets/less)
│       ├── style.css <<< these are generated at runtime by Express
│       └── style.less <<< This is requested by the client, Express munges it
├── routes <<< Express routes
│   ├── index.js
│   └── user.js
├── test
│   └── jasmine <<< It's in a bad state with Grunt 0.3.x vs 0.4.x, no CI possible now
│       ├── index.html
│       ├── spec
│       │   └── TrySpec.js
│       └── vendor
│           ├── MIT.LICENSE
│           ├── jasmine-html.js
│           ├── jasmine-jquery.js
│           ├── jasmine.css
│           ├── jasmine.js
│           └── jasmine_favicon.png
└── views <<< Express views
    ├── index.jade
    └── layout.jade
```

### Development

Many things are dependent upon the build cycle.

```
grunt watch
```

### Testing

#### Configuration on Jenkins

The ```config.json.example``` file is used to configure Jenkins' runtime environment.  It's copied to ```config.json```, so that file needs to be updated as appropriate if new config options are added.  For testing, the important configuration at this time is the location of the virtual serial ports.

#### Running tests

There's two different collections of test suites: ones that run on the server, and ones that run on the GUI/interface layer.  Mocha is used for the server-side tests, Jasmine for the GUI layer.

To run tests in the development environment:

```bash
grunt test
```

To run Mocha tests for xunit output:

```bash
mocha --reporter xunit test/mocha
```